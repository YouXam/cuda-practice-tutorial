# 第 6 题：二维卷积

二维卷积是数字图像处理、计算机视觉和深度学习中的基础操作。本题旨在通过编程实现二维卷积，进一步巩固你对并行计算、线程协作与共享内存等知识点的理解和应用。

## 二维卷积

二维卷积是数字图像处理中最基础且重要的运算方法之一，其本质是通过一个称为卷积核或滤波器的小型矩阵，对图像中的每个像素及其邻域进行加权求和计算。这种运算能够实现图像平滑、锐化、边缘检测等多种效果，是许多高级图像处理算法的基础。

从数学角度看，二维离散卷积运算可以表示为：对于输入图像 $I$ 和大小为 $m \times n$ 的卷积核 $K$，输出图像中位置 $(x,y)$ 处的像素值 $I'(x,y)$ 等于以 $(x,y)$ 为中心的图像区域与卷积核 $K$ 的对应元素相乘后求和。具体计算公式为 $$I'(x,y)=\sum_{i=0}^{m-1}\sum_{j=0}^{n-1} I(x+i,y+j) \cdot K(i,j)$$

其中 $i$ 和 $j$ 的取值范围由卷积核的大小决定。这个计算过程可以形象地理解为将卷积核在图像上滑动，在每个位置进行局部加权求和。

```
输入:            卷积核:     输出
┌─────────┐     ┌──────┐   ┌───────┐
│ 1  2  3 │     │ 1  1 │   │ 12 15 │
│ 4  5  6 │  *  │ 1  1 │ = │ 24 28 │
│ 7  8  9 │     └──────┘   └───────┘
└─────────┘
```

如果边界处不进行额外处理，那么输出图像的尺寸将小于输入图像（准确来说，输出尺寸 =（输入尺寸 - 卷积核尺寸 + 1））。为了保持输出图像与输入图像相同大小，通常会在输入图像周围添加额外的边界像素，这称为填充（padding）。填充可以是零填充（在边界添加零）或镜像填充（使用边界附近的像素值）。本题目中，你需要使用零填充来处理边界问题。

提示：类似第三题，你可以使用共享内存来优化计算。

## 测试

测试数据中的卷积核长度和宽度可能的取值为 $\{1, 3, 5, 7\}$。你仍然可以使用 `make test` 编译并运行测试。